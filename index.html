<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ğŸ­ Teatro Coach IA</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.container{background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);padding:40px;max-width:600px;width:100%;text-align:center}h1{color:#667eea;margin-bottom:10px;font-size:2.5em}p{color:#666;margin-bottom:30px}.upload-area{border:3px dashed #667eea;border-radius:15px;padding:40px;margin-bottom:30px;cursor:pointer;transition:all 0.3s}.upload-area:hover{background:#f8f9ff;border-color:#764ba2}.upload-area.dragover{background:#e8ecff;border-color:#764ba2}input[type=file]{display:none}.upload-icon{font-size:4em;margin-bottom:15px}.upload-text{color:#667eea;font-size:1.2em;font-weight:600;margin-bottom:10px}.upload-hint{color:#999;font-size:0.9em}.status{margin-top:20px;padding:15px;border-radius:10px;display:none}.status.show{display:block}.status.success{background:#d4edda;color:#155724}.status.error{background:#f8d7da;color:#721c24}.status.info{background:#d1ecf1;color:#0c5460}#startBtn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:15px 40px;border-radius:25px;font-size:1.1em;font-weight:600;cursor:pointer;display:none;margin-top:20px;transition:transform 0.2s}#startBtn:hover{transform:scale(1.05)}#startBtn:active{transform:scale(0.95)}.script-info{background:#f8f9ff;padding:15px;border-radius:10px;margin-top:20px;display:none}.script-info.show{display:block}.script-info h3{color:#667eea;margin-bottom:10px}.script-details{text-align:left;color:#666;font-size:0.9em}</style></head><body><div class="container"><h1>ğŸ­ Teatro Coach IA</h1><p>Sube tu guion y ensaya con IA</p><div class="upload-area" id="uploadArea"><div class="upload-icon">ğŸ“„</div><div class="upload-text">Arrastra tu guion aquÃ­</div><div class="upload-hint">o haz clic para seleccionar (PDF o TXT)</div><input type="file" id="fileInput" accept=".pdf,.txt"></div><div class="script-info" id="scriptInfo"><h3>ğŸ“‹ Guion cargado</h3><div class="script-details" id="scriptDetails"></div></div><button id="startBtn">ğŸ¤ Empezar Ensayo</button><div class="status" id="status"></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script><script>pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';const uploadArea=document.getElementById('uploadArea');const fileInput=document.getElementById('fileInput');const status=document.getElementById('status');const startBtn=document.getElementById('startBtn');const scriptInfo=document.getElementById('scriptInfo');const scriptDetails=document.getElementById('scriptDetails');let scriptData=null;function showStatus(msg,type){status.textContent=msg;status.className='status show '+type;setTimeout(()=>status.classList.remove('show'),5000)}uploadArea.addEventListener('click',()=>fileInput.click());uploadArea.addEventListener('dragover',e=>{e.preventDefault();uploadArea.classList.add('dragover')});uploadArea.addEventListener('dragleave',()=>uploadArea.classList.remove('dragover'));uploadArea.addEventListener('drop',e=>{e.preventDefault();uploadArea.classList.remove('dragover');const files=e.dataTransfer.files;if(files.length>0)handleFile(files[0])});fileInput.addEventListener('change',e=>{if(e.target.files.length>0)handleFile(e.target.files[0])});async function handleFile(file){const ext=file.name.split('.').pop().toLowerCase();if(ext!=='pdf'&&ext!=='txt'){showStatus('âš ï¸ Solo se aceptan archivos PDF o TXT','error');return}showStatus('ğŸ“– Leyendo guion...','info');try{let text='';if(ext==='pdf'){text=await readPDF(file)}else{text=await readText(file)}if(!text||text.trim().length<100){showStatus('âš ï¸ El archivo parece estar vacÃ­o o es muy corto','error');return}scriptData={name:file.name,text:text,lines:text.split('\n').filter(l=>l.trim()),characters:extractCharacters(text)};displayScriptInfo();showStatus('âœ… Guion cargado correctamente','success');startBtn.style.display='block'}catch(err){console.error(err);showStatus('âŒ Error al leer el archivo: '+err.message,'error')}}async function readPDF(file){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=async function(e){try{const pdf=await pdfjsLib.getDocument({data:e.target.result}).promise;let fullText='';for(let i=1;i<=pdf.numPages;i++){const page=await pdf.getPage(i);const content=await page.getTextContent();const pageText=content.items.map(item=>item.str).join(' ');fullText+=pageText+'\n'}resolve(fullText)}catch(err){reject(err)}};reader.onerror=()=>reject(new Error('Error al leer PDF'));reader.readAsArrayBuffer(file)})}async function readText(file){return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onload=e=>resolve(e.target.result);reader.onerror=()=>reject(new Error('Error al leer TXT'));reader.readAsText(file,'UTF-8')})}function extractCharacters(text){const chars=new Set();const lines=text.split('\n');lines.forEach(line=>{const match=line.match(/^([A-ZÃÃ‰ÃÃ“ÃšÃ‘][A-ZÃÃ‰ÃÃ“ÃšÃ‘\s]+):/);if(match)chars.add(match[1].trim())});return Array.from(chars)}function displayScriptInfo(){scriptInfo.classList.add('show');const chars=scriptData.characters.length>0?scriptData.characters.join(', '):'No detectados';scriptDetails.innerHTML=`<strong>ğŸ“„ Archivo:</strong> ${scriptData.name}<br><strong>ğŸ“ LÃ­neas:</strong> ${scriptData.lines.length}<br><strong>ğŸ­ Personajes:</strong> ${chars}`}startBtn.addEventListener('click',()=>{if(!scriptData){showStatus('âš ï¸ Primero debes cargar un guion','error');return}showStatus('ğŸ¤ FunciÃ³n prÃ³ximamente: selecciÃ³n de escena y ensayo por voz','info')})</script></body></html>
